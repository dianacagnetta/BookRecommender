<svg viewBox="0 0 1600 2000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .class-box { fill: #f9f9f9; stroke: #333; stroke-width: 2; }
      .interface-box { fill: #e8f4f8; stroke: #333; stroke-width: 2; }
      .class-title { fill: #333; font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; }
      .class-content { fill: #333; font-family: Arial, sans-serif; font-size: 11px; }
      .relation { stroke: #666; stroke-width: 1.5; fill: none; }
      .relation-dashed { stroke: #666; stroke-width: 1.5; fill: none; stroke-dasharray: 5,5; }
      .relation-label { fill: #555; font-family: Arial, sans-serif; font-size: 10px; font-style: italic; }
      .arrow { fill: #666; }
      .arrow-white { fill: white; stroke: #666; stroke-width: 1.5; }
    </style>
  </defs>

  <!-- Libro (centro) -->
  <g id="Libro">
    <rect x="650" y="500" width="220" height="280" class="class-box"/>
    <text x="760" y="520" text-anchor="middle" class="class-title">Libro</text>
    <line x1="650" y1="530" x2="870" y2="530" stroke="#333" stroke-width="1"/>
    <text x="660" y="548" class="class-content">- libroId: int</text>
    <text x="660" y="563" class="class-content">- titolo: String</text>
    <text x="660" y="578" class="class-content">- autore: String</text>
    <text x="660" y="593" class="class-content">- annoPubblicazione: int</text>
    <text x="660" y="608" class="class-content">- editore: String</text>
    <text x="660" y="623" class="class-content">- categoria: String</text>
    <line x1="650" y1="633" x2="870" y2="633" stroke="#333" stroke-width="1"/>
    <text x="660" y="651" class="class-content">+ Libro(int, String, String,</text>
    <text x="675" y="666" class="class-content">int, String, String)</text>
    <text x="660" y="681" class="class-content">+ getLibroId(): int</text>
    <text x="660" y="696" class="class-content">+ getTitolo(): String</text>
    <text x="660" y="711" class="class-content">+ getAutore(): String</text>
    <text x="660" y="726" class="class-content">+ getAnnoPubblicazione(): int</text>
    <text x="660" y="741" class="class-content">+ getEditore(): String</text>
    <text x="660" y="756" class="class-content">+ getCategoria(): String</text>
    <text x="660" y="771" class="class-content">+ toString(): String</text>
  </g>

  <!-- ILibroDAO -->
  <g id="ILibroDAO">
    <rect x="100" y="200" width="250" height="140" class="interface-box"/>
    <text x="225" y="220" text-anchor="middle" class="class-content" font-style="italic">&lt;&lt;interface&gt;&gt;</text>
    <text x="225" y="238" text-anchor="middle" class="class-title">ILibroDAO</text>
    <line x1="100" y1="248" x2="350" y2="248" stroke="#333" stroke-width="1"/>
    <text x="110" y="266" class="class-content">+ getAllBooks(): List&lt;Libro&gt;</text>
    <text x="110" y="281" class="class-content">+ searchBooks(String, String,</text>
    <text x="125" y="296" class="class-content">Integer): List&lt;Libro&gt;</text>
    <text x="110" y="311" class="class-content">+ getBookById(int): Libro</text>
  </g>

  <!-- LibroDAOImpl -->
  <g id="LibroDAOImpl">
    <rect x="100" y="420" width="250" height="140" class="class-box"/>
    <text x="225" y="440" text-anchor="middle" class="class-title">LibroDAOImpl</text>
    <line x1="100" y1="450" x2="350" y2="450" stroke="#333" stroke-width="1"/>
    <text x="110" y="468" class="class-content">+ getAllBooks(): List&lt;Libro&gt;</text>
    <text x="110" y="483" class="class-content">+ searchBooks(String, String,</text>
    <text x="125" y="498" class="class-content">Integer): List&lt;Libro&gt;</text>
    <text x="110" y="513" class="class-content">+ getBookById(int): Libro</text>
  </g>

  <!-- IUtenteDAO -->
  <g id="IUtenteDAO">
    <rect x="100" y="650" width="250" height="120" class="interface-box"/>
    <text x="225" y="670" text-anchor="middle" class="class-content" font-style="italic">&lt;&lt;interface&gt;&gt;</text>
    <text x="225" y="688" text-anchor="middle" class="class-title">IUtenteDAO</text>
    <line x1="100" y1="698" x2="350" y2="698" stroke="#333" stroke-width="1"/>
    <text x="110" y="716" class="class-content">+ searchBooks(...): List&lt;Libro&gt;</text>
    <text x="110" y="731" class="class-content">+ getBooks(): List&lt;Libro&gt;</text>
    <text x="110" y="746" class="class-content">+ getBookById(int): Libro</text>
  </g>

  <!-- Response -->
  <g id="Response">
    <rect x="430" y="900" width="220" height="160" class="class-box"/>
    <text x="540" y="920" text-anchor="middle" class="class-title">Response</text>
    <line x1="430" y1="930" x2="650" y2="930" stroke="#333" stroke-width="1"/>
    <text x="440" y="948" class="class-content">+ ok: boolean</text>
    <text x="440" y="963" class="class-content">+ message: String</text>
    <text x="440" y="978" class="class-content">+ libri: List&lt;Libro&gt;</text>
    <text x="440" y="993" class="class-content">+ libro: Libro</text>
    <text x="440" y="1008" class="class-content">+ utente: Utente</text>
    <line x1="430" y1="1018" x2="650" y2="1018" stroke="#333" stroke-width="1"/>
    <text x="440" y="1036" class="class-content">+ Response()</text>
    <text x="440" y="1051" class="class-content">+ Response(boolean, String, Libro)</text>
  </g>

  <!-- Request -->
  <g id="Request">
    <rect x="720" y="900" width="220" height="160" class="class-box"/>
    <text x="830" y="920" text-anchor="middle" class="class-title">Request</text>
    <line x1="720" y1="930" x2="940" y2="930" stroke="#333" stroke-width="1"/>
    <text x="730" y="948" class="class-content">+ action: String</text>
    <text x="730" y="963" class="class-content">+ titolo: String</text>
    <text x="730" y="978" class="class-content">+ autore: String</text>
    <text x="730" y="993" class="class-content">+ anno: Integer</text>
    <text x="730" y="1008" class="class-content">+ libroId: int</text>
    <line x1="720" y1="1018" x2="940" y2="1018" stroke="#333" stroke-width="1"/>
    <text x="730" y="1036" class="class-content">+ Request()</text>
  </g>

  <!-- NetworkClient -->
  <g id="NetworkClient">
    <rect x="1040" y="900" width="220" height="140" class="class-box"/>
    <text x="1150" y="920" text-anchor="middle" class="class-title">NetworkClient</text>
    <line x1="1040" y1="930" x2="1260" y2="930" stroke="#333" stroke-width="1"/>
    <text x="1050" y="948" class="class-content">- instance: NetworkClient</text>
    <text x="1050" y="963" class="class-content">- socket: Socket</text>
    <text x="1050" y="978" class="class-content">- in: BufferedReader</text>
    <text x="1050" y="993" class="class-content">- out: PrintWriter</text>
    <line x1="1040" y1="1003" x2="1260" y2="1003" stroke="#333" stroke-width="1"/>
    <text x="1050" y="1021" class="class-content">+ send(Request): Response</text>
  </g>

  <!-- ClientHandler -->
  <g id="ClientHandler">
    <rect x="100" y="880" width="230" height="140" class="class-box"/>
    <text x="215" y="900" text-anchor="middle" class="class-title">ClientHandler</text>
    <line x1="100" y1="910" x2="330" y2="910" stroke="#333" stroke-width="1"/>
    <text x="110" y="928" class="class-content">- socket: Socket</text>
    <text x="110" y="943" class="class-content">- libroDao: ILibroDAO</text>
    <text x="110" y="958" class="class-content">- utenteDao: IUtenteDAO</text>
    <line x1="100" y1="968" x2="330" y2="968" stroke="#333" stroke-width="1"/>
    <text x="110" y="986" class="class-content">+ run(): void</text>
    <text x="110" y="1001" class="class-content">+ ClientHandler(Socket)</text>
  </g>

  <!-- VisualizzaLibroController -->
  <g id="VisualizzaLibroController">
    <rect x="1050" y="200" width="250" height="180" class="class-box"/>
    <text x="1175" y="220" text-anchor="middle" class="class-title">VisualizzaLibroController</text>
    <line x1="1050" y1="230" x2="1300" y2="230" stroke="#333" stroke-width="1"/>
    <text x="1060" y="248" class="class-content">- libro: Libro</text>
    <text x="1060" y="263" class="class-content">- utente: Utente</text>
    <text x="1060" y="278" class="class-content">- guest: boolean</text>
    <text x="1060" y="293" class="class-content">- valutazioniList: List&lt;Valutazione&gt;</text>
    <line x1="1050" y1="303" x2="1300" y2="303" stroke="#333" stroke-width="1"/>
    <text x="1060" y="321" class="class-content">+ setData(Libro, List, List): void</text>
    <text x="1060" y="336" class="class-content">+ setGuest(boolean): void</text>
    <text x="1060" y="351" class="class-content">+ setUtente(Utente): void</text>
    <text x="1060" y="366" class="class-content">+ valutaLibro(): void</text>
  </g>

  <!-- RicercaController -->
  <g id="RicercaController">
    <rect x="1050" y="450" width="250" height="160" class="class-box"/>
    <text x="1175" y="470" text-anchor="middle" class="class-title">RicercaController</text>
    <line x1="1050" y1="480" x2="1300" y2="480" stroke="#333" stroke-width="1"/>
    <text x="1060" y="498" class="class-content">- tableRisultati: TableView&lt;Libro&gt;</text>
    <text x="1060" y="513" class="class-content">- guest: boolean</text>
    <text x="1060" y="528" class="class-content">- utente: Utente</text>
    <line x1="1050" y1="538" x2="1300" y2="538" stroke="#333" stroke-width="1"/>
    <text x="1060" y="556" class="class-content">+ cercaLibri(): void</text>
    <text x="1060" y="571" class="class-content">+ setGuest(boolean): void</text>
    <text x="1060" y="586" class="class-content">+ setUtente(Utente): void</text>
    <text x="1060" y="601" class="class-content">- apriDettagliLibro(int): void</text>
  </g>

  <!-- SelettoreLibroController -->
  <g id="SelettoreLibroController">
    <rect x="1050" y="680" width="250" height="140" class="class-box"/>
    <text x="1175" y="700" text-anchor="middle" class="class-title">SelettoreLibroController</text>
    <line x1="1050" y1="710" x2="1300" y2="710" stroke="#333" stroke-width="1"/>
    <text x="1060" y="728" class="class-content">- listaLibri: ListView&lt;Libro&gt;</text>
    <text x="1060" y="743" class="class-content">- libreriaId: int</text>
    <text x="1060" y="758" class="class-content">- utente: Utente</text>
    <line x1="1050" y1="768" x2="1300" y2="768" stroke="#333" stroke-width="1"/>
    <text x="1060" y="786" class="class-content">+ setData(...): void</text>
    <text x="1060" y="801" class="class-content">+ aggiungiLibro(): void</text>
  </g>

  <!-- Libreria -->
  <g id="Libreria">
    <rect x="430" y="200" width="180" height="140" class="class-box"/>
    <text x="520" y="220" text-anchor="middle" class="class-title">Libreria</text>
    <line x1="430" y1="230" x2="610" y2="230" stroke="#333" stroke-width="1"/>
    <text x="440" y="248" class="class-content">- id: int</text>
    <text x="440" y="263" class="class-content">- utenteId: int</text>
    <text x="440" y="278" class="class-content">- nome: String</text>
    <line x1="430" y1="288" x2="610" y2="288" stroke="#333" stroke-width="1"/>
    <text x="440" y="306" class="class-content">+ getId(): int</text>
    <text x="440" y="321" class="class-content">+ getNome(): String</text>
  </g>

  <!-- ILibrerieDAO -->
  <g id="ILibrerieDAO">
    <rect x="400" y="420" width="240" height="120" class="interface-box"/>
    <text x="520" y="440" text-anchor="middle" class="class-content" font-style="italic">&lt;&lt;interface&gt;&gt;</text>
    <text x="520" y="458" text-anchor="middle" class="class-title">ILibrerieDAO</text>
    <line x1="400" y1="468" x2="640" y2="468" stroke="#333" stroke-width="1"/>
    <text x="410" y="486" class="class-content">+ getLibriInLibreria(int): List&lt;Libro&gt;</text>
    <text x="410" y="501" class="class-content">+ aggiungiLibroALibreria(...): boolean</text>
    <text x="410" y="516" class="class-content">+ rimuoviLibroDaLibreria(...): boolean</text>
  </g>

  <!-- RELAZIONI -->
  
  <!-- LibroDAOImpl implementa ILibroDAO -->
  <path class="relation-dashed" d="M 225 420 L 225 340"/>
  <polygon class="arrow-white" points="225,340 220,350 230,350"/>
  <text x="235" y="380" class="relation-label">implementa</text>

  <!-- ILibroDAO restituisce Libro -->
  <path class="relation-dashed" d="M 350 270 L 650 600"/>
  <polygon class="arrow" points="650,600 642,593 645,603"/>
  <text x="480" y="420" class="relation-label">restituisce</text>

  <!-- LibroDAOImpl crea Libro -->
  <path class="relation-dashed" d="M 350 490 L 650 640"/>
  <polygon class="arrow" points="650,640 642,633 645,643"/>
  <text x="480" y="560" class="relation-label">crea</text>

  <!-- IUtenteDAO usa Libro -->
  <path class="relation-dashed" d="M 350 710 L 650 680"/>
  <polygon class="arrow" points="650,680 641,685 647,675"/>
  <text x="480" y="690" class="relation-label">restituisce</text>

  <!-- Response contiene Libro -->
  <path class="relation" d="M 540 900 L 760 780"/>
  <polygon class="arrow" points="760,780 751,786 757,776"/>
  <text x="630" y="830" class="relation-label">contiene</text>

  <!-- Request contiene dati Libro -->
  <path class="relation-dashed" d="M 830 900 L 760 780"/>
  <polygon class="arrow" points="760,780 766,789 756,786"/>
  <text x="780" y="830" class="relation-label">contiene dati</text>

  <!-- NetworkClient usa Request/Response -->
  <path class="relation-dashed" d="M 1040 970 L 940 970"/>
  <polygon class="arrow" points="940,970 950,965 950,975"/>
  <text x="970" y="960" class="relation-label">invia</text>

  <path class="relation-dashed" d="M 1040 1000 L 650 1000"/>
  <polygon class="arrow" points="1040,1000 1030,995 1030,1005"/>
  <text x="820" y="990" class="relation-label">riceve</text>

  <!-- ClientHandler usa DAO -->
  <path class="relation-dashed" d="M 215 880 L 225 560"/>
  <polygon class="arrow" points="225,560 220,570 230,570"/>
  <text x="235" y="710" class="relation-label">usa</text>

  <path class="relation-dashed" d="M 215 880 L 225 770"/>
  <polygon class="arrow" points="225,770 220,780 230,780"/>
  <text x="160" y="820" class="relation-label">usa</text>

  <!-- ClientHandler elabora Libro -->
  <path class="relation-dashed" d="M 330 950 L 650 720"/>
  <polygon class="arrow" points="650,720 641,725 647,715"/>
  <text x="470" y="830" class="relation-label">elabora</text>

  <!-- VisualizzaLibroController visualizza Libro -->
  <path class="relation" d="M 1050 290 L 870 640"/>
  <polygon class="arrow" points="870,640 878,632 868,635"/>
  <text x="940" y="450" class="relation-label">visualizza</text>

  <!-- RicercaController gestisce Libro -->
  <path class="relation" d="M 1050 530 L 870 640"/>
  <polygon class="arrow" points="870,640 878,633 868,636"/>
  <text x="940" y="580" class="relation-label">gestisce</text>

  <!-- SelettoreLibroController seleziona Libro -->
  <path class="relation" d="M 1050 750 L 870 680"/>
  <polygon class="arrow" points="870,680 879,675 875,685"/>
  <text x="940" y="710" class="relation-label">seleziona</text>

  <!-- Controllers usano NetworkClient -->
  <path class="relation-dashed" d="M 1175 380 L 1150 900"/>
  <polygon class="arrow" points="1150,900 1145,890 1155,890"/>
  <text x="1180" y="630" class="relation-label">usa</text>

  <path class="relation-dashed" d="M 1175 610 L 1150 900"/>
  <polygon class="arrow" points="1150,900 1145,890 1155,890"/>

  <path class="relation-dashed" d="M 1175 820 L 1150 900"/>
  <polygon class="arrow" points="1150,900 1145,890 1155,890"/>

  <!-- Libreria contiene Libri -->
  <path class="relation" d="M 610 270 L 650 640"/>
  <polygon class="arrow" points="650,640 645,630 655,630"/>
  <text x="620" y="440" class="relation-label">contiene *</text>

  <!-- ILibrerieDAO gestisce Libro -->
  <path class="relation-dashed" d="M 640 480 L 650 640"/>
  <polygon class="arrow" points="650,640 645,630 655,630"/>
  <text x="660" y="550" class="relation-label">gestisce</text>

</svg>